(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const e of s)if(e.type==="childList")for(const i of e.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function o(s){const e={};return s.integrity&&(e.integrity=s.integrity),s.referrerPolicy&&(e.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?e.credentials="include":s.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function l(s){if(s.ep)return;s.ep=!0;const e=o(s);fetch(s.href,e)}})();const u={header:document.getElementById("header"),mobile:{burger:document.getElementById("burger"),menu:document.getElementById("mobileMenu"),links:document.querySelectorAll(".mobile-menu__link")},about:{slider:document.getElementById("aboutSlider"),dots:document.getElementById("sliderDots"),slides:document.querySelectorAll(".about__slide"),prev:document.querySelector(".about__slider-btn--prev"),next:document.querySelector(".about__slider-btn--next")},animations:{get animated(){return document.querySelectorAll(".animate-on-scroll")}},counters:document.querySelectorAll("[data-count]"),services:{tabs:document.querySelectorAll(".services__buttonWrapper .tab-button"),cards:document.querySelectorAll(".service-card")},portfolio:{tabs:document.querySelectorAll(".portfolio__buttonWrapper .tab-button"),grid:document.querySelector(".portfolio__grid"),moreBtn:document.querySelector(".portfolio__more")},modalGallery:{modal:document.getElementById("imageModal"),img:document.querySelector("#imageModal .gallery-modal__img"),close:document.querySelector("#imageModal .gallery-modal__close"),left:document.querySelector("#imageModal .gallery-modal__arrow--left"),right:document.querySelector("#imageModal .gallery-modal__arrow--right")},contact:{form:document.getElementById("contactForm"),phone:document.getElementById("phone"),success:document.getElementById("successModal"),close:document.getElementById("modalClose")},partners:{track:document.querySelector(".partners__track")},preload:{heroVideo:document.querySelector(".hero__video")}};function I(){const{form:t,phone:r,success:o,close:l}=u.contact;function s(i){const n=i.replace(/\D/g,"");let a="+375 ";return n.length>3&&(a+="("+n.substring(3,5)+") "),n.length>5&&(a+=n.substring(5,8)),n.length>8&&(a+="-"+n.substring(8,10)),n.length>10&&(a+="-"+n.substring(10,12)),a}r.addEventListener("input",i=>{i.target.value=s(i.target.value)}),t.addEventListener("submit",i=>{i.preventDefault();const n=new FormData(contactForm);Object.fromEntries(n),o.classList.add("active"),document.body.style.overflow="hidden",t.reset()});function e(){o.classList.remove("active"),document.body.style.overflow=""}l.addEventListener("click",e),o.querySelector(".modal__backdrop").addEventListener("click",e),document.addEventListener("keydown",i=>{i.key==="Escape"&&successModal.classList.contains("active")&&e()})}function j(){const t=u.counters,r=new IntersectionObserver(o=>{o.forEach(l=>{if(l.isIntersecting){const s=l.target,e=parseInt(s.dataset.count);let i=0;const n=e/50,d=2e3/50,m=setInterval(()=>{i+=n,i>=e?(s.textContent=e.toLocaleString()+"+",clearInterval(m)):s.textContent=Math.floor(i).toLocaleString()},d);r.unobserve(s)}})},{threshold:.5});t.forEach(o=>{r.observe(o)})}const M=""+new URL("logo-slogan-white-qC8WK4dF.svg",import.meta.url).href,C=""+new URL("logo-slogan-DRKhRWtX.svg",import.meta.url).href;function x(){function t(){const r=window.scrollY,o=document.querySelector(".header__logo-slogan");r>50?(u.header.classList.add("scrolled"),o.src=C):(u.header.classList.remove("scrolled"),o.src=M)}window.addEventListener("scroll",t,{passive:!0})}const{burger:k,menu:q,links:B}=u.mobile;function T(){function t(){k.classList.toggle("active"),q.classList.toggle("active"),document.body.style.overflow=q.classList.contains("active")?"hidden":""}k.addEventListener("click",t),B.forEach(r=>{r.addEventListener("click",t)})}const w={ГРОБЫ:[{src:"./images/coffins/gdd2-blue.jpg",title:"ГДД-2 синий",subtitle:"Обитые тканью",large:!0},{src:"./images/coffins/gdd2-brown.jpg",title:"ГДД-2 коричневый",subtitle:"Обитые тканью"},{src:"./images/coffins/gdd2-red.jpg",title:"ГДД-2 бордовый",subtitle:"Обитые тканью"},{src:"./images/coffins/com-4-white.jpg",title:"Комбинированный эконом белый",subtitle:"Комбинированные",large:!0},{src:"./images/coffins/comb-4-blue.jpg",title:"Комбинированный эконом белый",subtitle:"Комбинированные"},{src:"./images/coffins/comb-brown.jpg",title:"Комбинированный эконом коричневый",subtitle:"Комбинированные"},{src:"./images/coffins/comb-red.jpg",title:"Комбинированный эконом бордовый",subtitle:"Комбинированные"},{src:"./images/coffins/comb-6-white.jpg",title:"Комбинированный 6-гранный белый",subtitle:"Комбинированные",large:!0},{src:"./images/coffins/comb-rez-red.jpg",title:"Комбинированный 6-гранный бордовый",subtitle:"Комбинированные"},{src:"./images/coffins/lak-3d.jpg",title:"Кристо 3D",subtitle:"Лакированные",large:!0},{src:"./images/coffins/lak-light.jpg",title:"Х-14 Орех Светлый",subtitle:"Лакированные"},{src:"./images/coffins/lak-m6-white.jpg",title:"М-6 Белый",subtitle:"Лакированные"},{src:"./images/coffins/lak-rez.jpg",title:"Х-14 Резной",subtitle:"Лакированные"},{src:"./images/coffins/lak-vishnya-rez-vechnay.jpg",title:"Вечная память Вишня",subtitle:"Лакированные"},{src:"./images/coffins/lak-vishnya.jpg",title:"Х-13 Вишня",subtitle:"Лакированные"},{src:"./images/coffins/x-8.jpg",title:"Х-8 Саркофаг",subtitle:"VIP",large:!0},{src:"./images/coffins/x-8-dr.jpg",title:"Х-8 Саркофаг ДР",subtitle:"VIP"},{src:"./images/coffins/x-9-dr-rez.jpg",title:"Х-9 ДР Резной",subtitle:"VIP"}],ВЕНКИ:[{src:"./images/wreaths/dv-1.png",title:"Венок серии ДВ-1",subtitle:"Венки"},{src:"./images/wreaths/dv-2-1.png",title:"Венок серии ДВ-2",subtitle:"Венки"},{src:"./images/wreaths/dv-3.png",title:"Венок серии ДВ-3",subtitle:"Венки"},{src:"./images/wreaths/vr-1.png",title:"Венок серии ВР-1",subtitle:"Венки"},{src:"./images/wreaths/vr-1-2-1.png",title:"Венок серии ВР-2",subtitle:"Венки"},{src:"./images/wreaths/vr-1-3.png",title:"Венок серии ВР-3",subtitle:"Венки"},{src:"./images/wreaths/korzina-pamyat-1_compressed.png",title:"Корзина “Память” Белая",subtitle:"Корзины"},{src:"./images/wreaths/korzina-pamyat-2_compressed.png",title:"Корзина “Память” Голубая",subtitle:"Корзины"},{src:"./images/wreaths/korzina-pamyat-4_compressed.png",title:"Корзина “Память” Бело-фиолетовая",subtitle:"Корзины"},{src:"./images/wreaths/venok-serii-florina-2_compressed-1.jpg",title:"Венки “Флорина-2”",subtitle:"Венки"},{src:"./images/wreaths/venok-serii-florina-3_compressed-1.jpg",title:"Венки “Флорина-3”",subtitle:"Венки"},{src:"./images/wreaths/venok-serii-gs-3_compressed-1.jpg",title:"Венок серии ГС-3",subtitle:"Венки"},{src:"./images/wreaths/venok-serii-k18-1-1_compressed-1.jpg",title:"Венок серии К-18",subtitle:"Венки"},{src:"./images/wreaths/venok-serii-k18-1-3_compressed-1.jpg",title:"Венок серии К-18-3",subtitle:"Венки"},{src:"./images/wreaths/venok-serii-kb-3_compressed-1.jpg",title:"Венок серии КВ-3",subtitle:"Венки"},{src:"./images/wreaths/venok-serii-vaza-2_compressed-1.jpg",title:"Венок “Ваза” Красный",subtitle:"Венки"},{src:"./images/wreaths/ov-2.png",title:"Композиция ритуальная 2",subtitle:"Композиция",large:!0},{src:"./images/wreaths/ov-3.png",title:"Композиция ритуальная 3",subtitle:"Композиция",tall:!0}],ЗАЛЫ:[{src:"./images/img4.jpg",title:"Зал прощания",subtitle:'г. Минск, ул.Кижеватова, д.58Е (УЗ "БСМП")'},{src:"./images/img5.jpg",title:"Зал прощания",subtitle:"г. Минск, ул. Кульман, 33а(VIP)",large:!0},{src:"./images/img6.jpg",title:"Зал прощания",subtitle:"г. Минск, ул. Ольшевского, 12(1)",tall:!0},{src:"./images/img10.webp",title:"Зал прощания",subtitle:"г. Минск, ул. Кулешова, 49(Дом Скорби Церемониал)"},{src:"./images/img11.webp",title:"Зал прощания",subtitle:"г. Минск, Минский район, 9-й км Могилевского шоссе"}]};function A(){const{modal:t,img:r,close:o,left:l,right:s}=u.modalGallery;let e=0,i=document.querySelector(".portfolio__buttonWrapper .tab-button.active")?.textContent.trim()||"ГРОБЫ";function n(c){e=c;const p=w[i];if(!p){console.error("Нет такой категории в portfolioData:",i);return}const v=p[e];if(!v){console.error("Нет элемента с таким индексом в категории:",i,"index:",e);return}r.src=v.src,t.classList.add("open")}function a(){t.classList.remove("open")}function d(){const c=w[i];e=(e+1)%c.length,n(e)}function m(){const c=w[i];e=(e-1+c.length)%c.length,n(e)}u.portfolio.grid.addEventListener("click",c=>{const p=c.target.closest(".portfolio__item");if(!p)return;const v=document.querySelector(".portfolio__buttonWrapper .tab-button.active");v&&(i=v.textContent.trim(),n(Number(p.dataset.index)))}),o.addEventListener("click",a),t.addEventListener("click",c=>{c.target===t&&a()}),l.addEventListener("click",m),s.addEventListener("click",d),document.addEventListener("keydown",c=>{t.classList.contains("open")&&(c.key==="Escape"&&a(),c.key==="ArrowRight"&&d(),c.key==="ArrowLeft"&&m())});let g=0,b=0;function f(c){g=c.changedTouches[0].clientX}function L(c){b=c.changedTouches[0].clientX}function E(){const c=b-g;Math.abs(c)<50||(c>0?m():d())}r.addEventListener("touchstart",f),r.addEventListener("touchmove",L),r.addEventListener("touchend",E)}const S=new IntersectionObserver(t=>{t.forEach(r=>{r.isIntersecting&&(r.target.classList.add("visible"),S.unobserve(r.target))})},{root:null,rootMargin:"0px",threshold:.1});function D(){const{animated:t}=u.animations;t.forEach(r=>{S.observe(r)})}function P(){const{tabs:t,grid:r,moreBtn:o}=u.portfolio,l=4;let s="ГРОБЫ",e=0;function i(){u.animations.animated.forEach(d=>S.observe(d))}function n(d){s=d,e=0,r.innerHTML="",a()}function a(){const m=w[s].slice(e,e+l);m.forEach((g,b)=>{const f=document.createElement("div");f.className="portfolio__item animate-on-scroll",f.dataset.index=e+b,g.large&&f.classList.add("portfolio__item--large"),g.tall&&f.classList.add("portfolio__item--tall"),f.innerHTML=`
                <img src="${g.src}" data-index="${e+b}" alt="${g.title}">
                <div class="portfolio__overlay">
                    <h3>${g.title}</h3>
                    <p>${g.subtitle}</p>
                </div>
            `,r.appendChild(f)}),e+=m.length,e>=w[s].length?o.style.display="none":o.style.display="block",i()}n("ГРОБЫ"),t.forEach(d=>{d.addEventListener("click",()=>{t.forEach(m=>m.classList.remove("active")),d.classList.add("active"),n(d.textContent.trim())})}),o.addEventListener("click",a)}function O(){const{heroVideo:t}=u.preload;t.addEventListener("loadeddata",()=>{document.body.classList.add("loaded")}),setTimeout(()=>{document.body.classList.add("loaded")},3e3)}function N(){const t=document.getElementById("scrollCard"),r=document.getElementById("phoneToggle"),o=document.querySelector(".scroll-card-container"),l=document.querySelector("#about"),s=document.querySelector(".btn-close-card");new IntersectionObserver(i=>{i[0].isIntersecting&&o.classList.add("isOpen")},{threshold:.2}).observe(l),r.addEventListener("click",()=>{t.classList.toggle("collapsed")}),t.addEventListener("click",()=>{t.classList.toggle("collapsed")}),s.addEventListener("click",i=>{i.stopPropagation(),t.classList.toggle("collapsed")})}function H(){const t=document.getElementById("scrollTopBtn");window.addEventListener("scroll",()=>{window.scrollY>400?t.classList.add("show"):t.classList.remove("show")}),t.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})})}function X(){const t={econom:["Траурный венок с лентой.","Транспорт для перевозки: по кол-ву свободных мест в катафалке.","Доставка товаров в Минске: ритуальные принадлежности по выбору.","Процесс сжигания.","Ведущий церемонии.","Оформление заказа на кремацию.","Туалет покойного на дому."],standart:["Поминальный набор.","Траурный венок с лентой.","Транспорт для перевозки: катафалк на 8 мест.","Процесс сжигания.","Предоставление ритуального зала.","Туалет покойного на дому."],premium:["Памятная табличка с надписью.","Поминальный набор.","Траурный венок с лентой.","Транспорт для перевозки: большой выбор автомобилей.","Доставка товаров в Минске: катафалк.","Процесс сжигания.","Предоставление ритуального зала.","Ведущий церемони.","Оформление заказа на кремацию.","Туалет покойного на дому."]},{tabs:r,cards:o}=u.services,l=[...o].map(e=>[...e.querySelectorAll(".service-card__features li")].map(n=>n.innerHTML));function s(e,i){const n=e.querySelector(".service-card__features");n.textContent="",i.forEach(a=>{const d=document.createElement("li");d.innerHTML=` <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"> <path d="M20 6L9 17l-5-5" /> </svg> ${a} `,n.appendChild(d)})}r.forEach((e,i)=>{e.addEventListener("click",()=>{if(r.forEach(n=>n.classList.remove("active")),e.classList.add("active"),e.textContent.trim()==="КРЕМАЦИЯ"){s(o[0],t.econom),s(o[1],t.standart),s(o[2],t.premium);const n=o[2].querySelector(".service-card__price-value");n.textContent="ОТ 2900 BYN";const a=o[2].querySelector(".service-card__title");a.textContent="ОТ 2900 BYN"}else{s(o[0],l[0]),s(o[1],l[1]),s(o[2],l[2]);const n=o[2].querySelector(".service-card__price-value");n.textContent="ОТ 3000 BYN";const a=o[2].querySelector(".service-card__title");a.textContent="ОТ 3000 BYN"}})})}function z(){const{slider:t,dots:r,slides:o,prev:l,next:s}=u.about;let e=0,i;function n(){o.forEach((h,_)=>{const y=document.createElement("button");y.classList.add("about__slider-dot"),_===0&&y.classList.add("active"),y.setAttribute("aria-label",`Слайд ${_+1}`),y.addEventListener("click",()=>L(_)),r.appendChild(y)})}let a=0,d=0;function m(h){a=h.touches[0].clientX}function g(h){d=h.touches[0].clientX}function b(){const h=a-d;Math.abs(h)>50&&(v(),h>0?E():c(),p())}function f(){r.querySelectorAll(".about__slider-dot").forEach((_,y)=>{_.classList.toggle("active",y===e)})}function L(h){o[e].classList.remove("active"),e=h,e>=o.length&&(e=0),e<0&&(e=o.length-1),o[e].classList.add("active"),f()}function E(){L(e+1)}function c(){L(e-1)}function p(){i=setInterval(E,5e3)}function v(){clearInterval(i)}n(),p(),l.addEventListener("click",()=>{v(),c(),p()}),s.addEventListener("click",()=>{v(),E(),p()}),t.addEventListener("touchstart",m,{passive:!0}),t.addEventListener("touchmove",g,{passive:!0}),t.addEventListener("touchend",b)}function R(){document.querySelectorAll('a[href^="#"]').forEach(t=>{t.addEventListener("click",function(r){const o=this.getAttribute("href");if(o==="#")return;r.preventDefault();const l=document.querySelector(o);if(l){const s=u.header.offsetHeight,e=l.getBoundingClientRect().top+window.scrollY-s;window.scrollTo({top:e,behavior:"smooth"})}})})}document.addEventListener("DOMContentLoaded",()=>{x(),T(),z(),D(),j(),R(),X(),P(),A(),I(),O(),H(),N()});

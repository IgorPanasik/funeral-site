(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const e of s)if(e.type==="childList")for(const i of e.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function o(s){const e={};return s.integrity&&(e.integrity=s.integrity),s.referrerPolicy&&(e.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?e.credentials="include":s.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function l(s){if(s.ep)return;s.ep=!0;const e=o(s);fetch(s.href,e)}})();const u={header:document.getElementById("header"),mobile:{burger:document.getElementById("burger"),menu:document.getElementById("mobileMenu"),links:document.querySelectorAll(".mobile-menu__link")},about:{slider:document.getElementById("aboutSlider"),dots:document.getElementById("sliderDots"),slides:document.querySelectorAll(".about__slide"),prev:document.querySelector(".about__slider-btn--prev"),next:document.querySelector(".about__slider-btn--next")},animations:{get animated(){return document.querySelectorAll(".animate-on-scroll")}},counters:document.querySelectorAll("[data-count]"),checkbox:{happy:document.querySelector("#happy")},services:{tabs:document.querySelectorAll(".services__buttonWrapper .tab-button"),cards:document.querySelectorAll(".service-card")},portfolio:{tabs:document.querySelectorAll(".portfolio__buttonWrapper .tab-button"),grid:document.querySelector(".portfolio__grid"),moreBtn:document.querySelector(".portfolio__more")},modalGallery:{modal:document.getElementById("imageModal"),img:document.querySelector("#imageModal .gallery-modal__img"),close:document.querySelector("#imageModal .gallery-modal__close"),left:document.querySelector("#imageModal .gallery-modal__arrow--left"),right:document.querySelector("#imageModal .gallery-modal__arrow--right")},contact:{form:document.getElementById("contactForm"),phone:document.getElementById("phone"),success:document.getElementById("successModal"),close:document.getElementById("modalClose")},partners:{track:document.querySelector(".partners__track")},preload:{heroVideo:document.querySelector(".hero__video")}};function I(){const{form:t,phone:r,success:o,close:l}=u.contact;function s(i){const n=i.replace(/\D/g,"");let a="+375 ";return n.length>3&&(a+="("+n.substring(3,5)+") "),n.length>5&&(a+=n.substring(5,8)),n.length>8&&(a+="-"+n.substring(8,10)),n.length>10&&(a+="-"+n.substring(10,12)),a}r.addEventListener("input",i=>{i.target.value=s(i.target.value)}),t.addEventListener("submit",i=>{i.preventDefault();const n=new FormData(contactForm);Object.fromEntries(n),o.classList.add("active"),document.body.style.overflow="hidden",t.reset()});function e(){o.classList.remove("active"),document.body.style.overflow=""}l.addEventListener("click",e),o.querySelector(".modal__backdrop").addEventListener("click",e),document.addEventListener("keydown",i=>{i.key==="Escape"&&successModal.classList.contains("active")&&e()})}function M(){const t=u.counters,r=new IntersectionObserver(o=>{o.forEach(l=>{if(l.isIntersecting){const s=l.target,e=parseInt(s.dataset.count);let i=0;const n=e/50,d=2e3/50,m=setInterval(()=>{i+=n,i>=e?(s.textContent=e.toLocaleString()+"+",clearInterval(m)):s.textContent=Math.floor(i).toLocaleString()},d);r.unobserve(s)}})},{threshold:.5});t.forEach(o=>{r.observe(o)})}const x=""+new URL("logo-slogan-white-qC8WK4dF.svg",import.meta.url).href,C=""+new URL("logo-slogan-DRKhRWtX.svg",import.meta.url).href;function B(){function t(){const r=window.scrollY,o=document.querySelector(".header__logo-slogan");r>50?(u.header.classList.add("scrolled"),o.src=C):(u.header.classList.remove("scrolled"),o.src=x)}window.addEventListener("scroll",t,{passive:!0})}const{burger:k,menu:q,links:T}=u.mobile;function A(){function t(){k.classList.toggle("active"),q.classList.toggle("active"),document.body.style.overflow=q.classList.contains("active")?"hidden":""}k.addEventListener("click",t),T.forEach(r=>{r.addEventListener("click",t)})}const E={ГРОБЫ:[{src:"./images/coffins/gdd2-blue.webp",title:"ГДД-2 синий",subtitle:"Обитые тканью",large:!0},{src:"./images/coffins/gdd2-brown.webp",title:"ГДД-2 коричневый",subtitle:"Обитые тканью"},{src:"./images/coffins/gdd2-red.webp",title:"ГДД-2 бордовый",subtitle:"Обитые тканью"},{src:"./images/coffins/com-4-white.webp",title:"Комбинированный эконом белый",subtitle:"Комбинированные",large:!0},{src:"./images/coffins/comb-4-blue.webp",title:"Комбинированный эконом белый",subtitle:"Комбинированные"},{src:"./images/coffins/comb-brown.webp",title:"Комбинированный эконом коричневый",subtitle:"Комбинированные"},{src:"./images/coffins/comb-red.webp",title:"Комбинированный эконом бордовый",subtitle:"Комбинированные"},{src:"./images/coffins/comb-6-white.webp",title:"Комбинированный 6-гранный белый",subtitle:"Комбинированные",large:!0},{src:"./images/coffins/comb-rez-red.webp",title:"Комбинированный 6-гранный бордовый",subtitle:"Комбинированные"},{src:"./images/coffins/lak-3d.webp",title:"Кристо 3D",subtitle:"Лакированные",large:!0},{src:"./images/coffins/lak-light.webp",title:"Х-14 Орех Светлый",subtitle:"Лакированные"},{src:"./images/coffins/lak-m6-white.webp",title:"М-6 Белый",subtitle:"Лакированные"},{src:"./images/coffins/lak-rez.webp",title:"Х-14 Резной",subtitle:"Лакированные"},{src:"./images/coffins/lak-vishnya-rez-vechnay.webp",title:"Вечная память Вишня",subtitle:"Лакированные"},{src:"./images/coffins/lak-vishnya.webp",title:"Х-13 Вишня",subtitle:"Лакированные"},{src:"./images/coffins/x-8.webp",title:"Х-8 Саркофаг",subtitle:"VIP",large:!0},{src:"./images/coffins/x-8-dr.webp",title:"Х-8 Саркофаг ДР",subtitle:"VIP"},{src:"./images/coffins/x-9-dr-rez.webp",title:"Х-9 ДР Резной",subtitle:"VIP"}],ВЕНКИ:[{src:"./images/wreaths/dv-1.webp",title:"Венок серии ДВ-1",subtitle:"Венки"},{src:"./images/wreaths/dv-2-1.webp",title:"Венок серии ДВ-2",subtitle:"Венки"},{src:"./images/wreaths/dv-3.webp",title:"Венок серии ДВ-3",subtitle:"Венки"},{src:"./images/wreaths/vr-1.webp",title:"Венок серии ВР-1",subtitle:"Венки"},{src:"./images/wreaths/vr-1-2-1.webp",title:"Венок серии ВР-2",subtitle:"Венки"},{src:"./images/wreaths/vr-1-3.webp",title:"Венок серии ВР-3",subtitle:"Венки"},{src:"./images/wreaths/korzina-pamyat-1_compressed.webp",title:"Корзина “Память” Белая",subtitle:"Корзины"},{src:"./images/wreaths/korzina-pamyat-2_compressed.webp",title:"Корзина “Память” Голубая",subtitle:"Корзины"},{src:"./images/wreaths/korzina-pamyat-4_compressed.webp",title:"Корзина “Память” Бело-фиолетовая",subtitle:"Корзины"},{src:"./images/wreaths/venok-serii-florina-2_compressed-1.webp",title:"Венки “Флорина-2”",subtitle:"Венки"},{src:"./images/wreaths/venok-serii-florina-3_compressed-1.webp",title:"Венки “Флорина-3”",subtitle:"Венки"},{src:"./images/wreaths/venok-serii-gs-3_compressed-1.webp",title:"Венок серии ГС-3",subtitle:"Венки"},{src:"./images/wreaths/venok-serii-k18-1-1_compressed-1.webp",title:"Венок серии К-18",subtitle:"Венки"},{src:"./images/wreaths/venok-serii-k18-1-3_compressed-1.webp",title:"Венок серии К-18-3",subtitle:"Венки"},{src:"./images/wreaths/venok-serii-kb-3_compressed-1.webp",title:"Венок серии КВ-3",subtitle:"Венки"},{src:"./images/wreaths/venok-serii-vaza-2_compressed-1.webp",title:"Венок “Ваза” Красный",subtitle:"Венки"},{src:"./images/wreaths/ov-2.webp",title:"Композиция ритуальная 2",subtitle:"Композиция",large:!0},{src:"./images/wreaths/ov-3.webp",title:"Композиция ритуальная 3",subtitle:"Композиция",tall:!0}],ЗАЛЫ:[{src:"./images/img4.webp",title:"Зал прощания",subtitle:'г. Минск, ул.Кижеватова, д.58Е (УЗ "БСМП")'},{src:"./images/img5.webp",title:"Зал прощания",subtitle:"г. Минск, ул. Кульман, 33а(VIP)",large:!0},{src:"./images/img6.webp",title:"Зал прощания",subtitle:"г. Минск, ул. Ольшевского, 12(1)",tall:!0},{src:"./images/img10.webp",title:"Зал прощания",subtitle:"г. Минск, ул. Кулешова, 49(Дом Скорби Церемониал)"},{src:"./images/img11.webp",title:"Зал прощания",subtitle:"г. Минск, Минский район, 9-й км Могилевского шоссе"}]};function D(){const{modal:t,img:r,close:o,left:l,right:s}=u.modalGallery;let e=0,i=document.querySelector(".portfolio__buttonWrapper .tab-button.active")?.textContent.trim()||"ГРОБЫ";function n(c){e=c;const b=E[i];if(!b){console.error("Нет такой категории в portfolioData:",i);return}const h=b[e];if(!h){console.error("Нет элемента с таким индексом в категории:",i,"index:",e);return}r.src=h.src,t.classList.add("open")}function a(){t.classList.remove("open")}function d(){const c=E[i];e=(e+1)%c.length,n(e)}function m(){const c=E[i];e=(e-1+c.length)%c.length,n(e)}u.portfolio.grid.addEventListener("click",c=>{const b=c.target.closest(".portfolio__item");if(!b)return;const h=document.querySelector(".portfolio__buttonWrapper .tab-button.active");h&&(i=h.textContent.trim(),n(Number(b.dataset.index)))}),o.addEventListener("click",a),t.addEventListener("click",c=>{c.target===t&&a()}),l.addEventListener("click",m),s.addEventListener("click",d),document.addEventListener("keydown",c=>{t.classList.contains("open")&&(c.key==="Escape"&&a(),c.key==="ArrowRight"&&d(),c.key==="ArrowLeft"&&m())});let f=0,v=0;function g(c){f=c.changedTouches[0].clientX}function y(c){v=c.changedTouches[0].clientX}function L(){const c=v-f;Math.abs(c)<50||(c>0?m():d())}r.addEventListener("touchstart",g),r.addEventListener("touchmove",y),r.addEventListener("touchend",L)}const S=new IntersectionObserver(t=>{t.forEach(r=>{r.isIntersecting&&(r.target.classList.add("visible"),S.unobserve(r.target))})},{root:null,rootMargin:"0px",threshold:.1});function P(){const{animated:t}=u.animations;t.forEach(r=>{S.observe(r)})}function O(){const{tabs:t,grid:r,moreBtn:o}=u.portfolio,l=4;let s="ГРОБЫ",e=0;function i(){u.animations.animated.forEach(d=>S.observe(d))}function n(d){s=d,e=0,r.innerHTML="",a()}function a(){const m=E[s].slice(e,e+l);m.forEach((f,v)=>{const g=document.createElement("div");g.className="portfolio__item animate-on-scroll",g.dataset.index=e+v,f.large&&g.classList.add("portfolio__item--large"),f.tall&&g.classList.add("portfolio__item--tall"),g.innerHTML=`
                <img src="${f.src}" data-index="${e+v}" alt="${f.title}">
                <div class="portfolio__overlay">
                    <h3>${f.title}</h3>
                    <p>${f.subtitle}</p>
                </div>
            `,r.appendChild(g)}),e+=m.length,e>=E[s].length?o.style.display="none":o.style.display="block",i()}n("ГРОБЫ"),t.forEach(d=>{d.addEventListener("click",()=>{t.forEach(m=>m.classList.remove("active")),d.classList.add("active"),n(d.textContent.trim())})}),o.addEventListener("click",a)}function N(){const{heroVideo:t}=u.preload;t.addEventListener("loadeddata",()=>{document.body.classList.add("loaded")}),setTimeout(()=>{document.body.classList.add("loaded")},3e3)}function H(){const t=document.getElementById("scrollCard"),r=document.getElementById("phoneToggle"),o=document.querySelector(".scroll-card-container"),l=document.querySelector(".services__header"),s=document.querySelector(".btn-close-card");new IntersectionObserver(i=>{i[0].isIntersecting&&o.classList.add("isOpen")},{threshold:.2}).observe(l),r.addEventListener("click",()=>{t.classList.toggle("collapsed")}),t.addEventListener("click",()=>{t.classList.toggle("collapsed")}),s.addEventListener("click",i=>{i.stopPropagation(),t.classList.toggle("collapsed")})}function X(){const t=document.getElementById("scrollTopBtn");window.addEventListener("scroll",()=>{window.scrollY>400?t.classList.add("show"):t.classList.remove("show")}),t.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})})}function z(){const t={econom:["Гроб обитый тканью(В наличии разные цвета).","Подушка.","Набор постельного.","Погребальный набор.","Транспорт для перевозки: по кол-ву свободных мест в катафалке.","Доставка товаров в Минске: ритуальные принадлежности по выбору.","Процесс сжигания.","Ведущий церемонии.","Оформление заказа на кремацию.","Туалет покойного на дому."],standart:["Гроб деревянный комбинированный(В наличии разные цвета).","Подушка.","Набор постельного.","Погребальный набор.","Поминальный набор.","Транспорт для перевозки: катафалк на 8 мест.","Процесс сжигания.","Предоставление ритуального зала.","Туалет покойного на дому."],premium:["Гроб деревянный лакированный(В наличии разные цвета).","Подушка.","Набор элитного постельного.","Погребальный VIP набор.","Поминальный набор.","Транспорт для перевозки: большой выбор автомобилей.","Доставка товаров в Минске: катафалк.","Процесс сжигания.","Предоставление ритуального зала.","Ведущий церемони.","Оформление заказа на кремацию.","Туалет покойного на дому."]},{tabs:r,cards:o}=u.services,l=[...o].map(e=>[...e.querySelectorAll(".service-card__features li")].map(n=>n.textContent.trim()));function s(e,i){const n=e.querySelector(".service-card__features");n.innerHTML="",i.forEach(a=>{const d=document.createElement("li");d.innerHTML=` <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"> <path d="M20 6L9 17l-5-5" /> </svg> ${a} `,n.appendChild(d)})}r.forEach((e,i)=>{e.addEventListener("click",()=>{if(!e.classList.contains("active"))if(r.forEach(n=>n.classList.remove("active")),e.classList.add("active"),e.textContent.trim()==="КРЕМАЦИЯ"){s(o[0],t.econom),s(o[1],t.standart),s(o[2],t.premium);const n=o[2].querySelector(".service-card__price-value");n.textContent="ОТ 2900 BYN";const a=o[2].querySelector(".service-card__title");a.textContent="ОТ 2900 BYN"}else{s(o[0],l[0]),s(o[1],l[1]),s(o[2],l[2]);const n=o[2].querySelector(".service-card__price-value");n.textContent="ОТ 3000 BYN";const a=o[2].querySelector(".service-card__title");a.textContent="ОТ 3000 BYN"}})})}function R(){const{slider:t,dots:r,slides:o,prev:l,next:s}=u.about;let e=0,i;function n(){o.forEach((p,_)=>{const w=document.createElement("button");w.classList.add("about__slider-dot"),_===0&&w.classList.add("active"),w.setAttribute("aria-label",`Слайд ${_+1}`),w.addEventListener("click",()=>y(_)),r.appendChild(w)})}let a=0,d=0;function m(p){a=p.touches[0].clientX}function f(p){d=p.touches[0].clientX}function v(){const p=a-d;Math.abs(p)>50&&(h(),p>0?L():c(),b())}function g(){r.querySelectorAll(".about__slider-dot").forEach((_,w)=>{_.classList.toggle("active",w===e)})}function y(p){o[e].classList.remove("active"),e=p,e>=o.length&&(e=0),e<0&&(e=o.length-1),o[e].classList.add("active"),g()}function L(){y(e+1)}function c(){y(e-1)}function b(){i=setInterval(L,5e3)}function h(){clearInterval(i)}n(),b(),l.addEventListener("click",()=>{h(),c(),b()}),s.addEventListener("click",()=>{h(),L(),b()}),t.addEventListener("touchstart",m,{passive:!0}),t.addEventListener("touchmove",f,{passive:!0}),t.addEventListener("touchend",v)}function V(){document.querySelectorAll('a[href^="#"]').forEach(t=>{t.addEventListener("click",function(r){const o=this.getAttribute("href");if(o==="#")return;r.preventDefault();const l=document.querySelector(o);if(l){const s=u.header.offsetHeight,e=l.getBoundingClientRect().top+window.scrollY-s;window.scrollTo({top:e,behavior:"smooth"})}})})}document.addEventListener("DOMContentLoaded",()=>{B(),A(),R(),P(),M(),V(),z(),O(),D(),I(),N(),X(),H()});
